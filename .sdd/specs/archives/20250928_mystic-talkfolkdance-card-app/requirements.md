# 要件定義 — 神秘のトークフォークダンスカードアプリ

## 機能概要
- 飲み会やワークショップで利用できるトークフォークダンス用のテーマカードを、タロットカード風 UI で 1 枚ずつランダム表示するシングルページ Web アプリ。
- カードを裏返す操作でテーマと神秘的な啓示を提示し、1000 件規模のテーマ群を重複なく使い切れるよう管理する。
- ブラウザだけで完結し、静的ホスティング（GitHub Pages 等）で配信できる。

## ユーザーストーリー
- 飲み会の司会者として、参加者が話題に困らないよう、タップするだけで新しいテーマを提示したい。
- ワークショップ参加者として、自分のスマホでもカードが見やすく直感的に操作できる UI がほしい。
- ファシリテーターとして、全テーマを使い切ったときにすぐリセットし、再度ランダムなテーマで進行を再開したい。

## 機能要件と受入基準
- **カード表示とアニメーション**
  - タロットカード風デザインの裏面が既定の状態で表示されること。
  - クリック / タップでカードが裏返るアニメーションが再生されること。
  - 裏返った後、テーマと啓示文がカードに表示されること。
- **テーマ選定ロジック**
  - 初回表示から連続する全操作で、1000 件のテーマ候補からランダムに 1 件を取得すること。
  - 過去に表示済みのテーマは `localStorage` 等に記録し、同一セッションでは再表示しないこと。
  - テーマが すべて消費された場合、次の操作時にリセットフローへ遷移すること。
- **啓示文の提示**
  - テーマ表示後、別途用意したメッセージ群からランダムに 1 件を選び、テーマと合わせて表示すること。
  - 啓示文はテーマの重複有無に関係なく表示され、連続利用時にも視認性が保たれること。
- **リセットフロー**
  - テーマ在庫が尽きた際、ユーザーに確認ダイアログまたは明示的なアラートでリセット可否を尋ねること。
  - 承認後、使用済みテーマ記録を削除し、カード表示を初期状態（裏面表示）へ戻すこと。
  - リセット拒否時は、最後に表示したテーマと啓示文を保持したままにすること。
- **ストレージ管理**
  - 使用済みテーマリストは `localStorage`（または `IndexedDB`）に JSON 形式等で保持すること。
  - ストレージデータが壊れている場合、アプリは自動的に初期状態へ復旧し、ユーザーへ分かる形で通知すること。
- **モバイル最適化**
  - 主要ビューはスマートフォン縦表示でカードが画面幅に収まるよう調整されていること。
  - タップ領域、フォントサイズ、ボタン類がモバイルでも操作しやすい大きさであること。
  - 画面回転（縦横）やウィンドウサイズ変更時も、カードとテキストがレイアウト崩れなく表示されること。
- **静的ホスティング適合**
  - アプリは HTML/CSS/JavaScript の静的ファイルのみで構成され、ビルド後に追加のサーバーサイド処理を必要としないこと。
  - GitHub Pages などでホストした際にも `localStorage` が正しく機能すること。

## 非機能要件
- 初回カード裏返し操作からテーマ・啓示表示までの体感レスポンスは 200ms 以内を目標とする。
- 主要処理はオフライン（ブラウザ単体）で完結し、ネットワーク未接続でも動作する。
- アニメーションは 60fps を目指し、カクつきが目立たないよう最適化する。
- コードとアセットは静的ホスティングで容易に配置できるディレクトリ構成とする。
- 重大なエラー（ストレージ破損等）が発生した際はユーザーへリカバリ手段を案内するメッセージを表示する。
